---
import config from "@/config/siteConfig.ts";
import dateFormat from "@/lib/utils/dateFormat";
import { humanize, plainify, slugify } from "@/lib/utils/textConverter";
import { FaRegFolder, FaRegUserCircle } from "react-icons/fa";
import ImageMod from "./ImageMod.astro";

const {
  summary_length,
  blog_folder,
}: { summary_length: number; blog_folder: string } = config.settings;

const { data } = Astro.props;
const { title, image, date, author, categories } = data.data;

---

TODO: Tested to replace with the astrotemplate JSX, but be carreful with bg class and other ?
<div
  class={`blog-card card card-compact w-full bg-base-100 shadow-xl transition-all duration-300 hover:shadow-2xl border-2 border-gray-200 ${isEven ? 'primary-hover hover:border-primary' : 'secondary-hover hover:border-secondary'}`}
>
  <a href={`/blog/${data.id}`}>
    <figure class="relative">
      {
        data.data.image && (
          <img src={data.data.image} alt={data.data.title} class="w-full object-cover h-24" />
        )
      }
    </figure>
  </a>
  <div class="card-body p-4">
    <div class="flex flex-wrap items-center gap-1 mb-3">
      {
        data.data.categories.map((category: unknown) => (
          <a href={`/categories/${category}`} class="badge badge-secondary badge-sm capitalize">
            {category}
          </a>
        ))
      }
    </div>
    <h2 class="card-title text-base">
      <a href={`/blog/${data.id}`}>{data.data.title}</a>
    </h2>
    {data.data.description && <p class="text-base-content/80">{data.data.description}</p>}
    <div
      class="footer-actions mt-4"
      style="display: flex; align-items: center; justify-content: space-between; width: 100%;"
    >
      <div style="display: flex; align-items: center; gap: 8px;">
        <div class="avatar">
          <div class="w-8 rounded-full">
            <img src={`https://i.pravatar.cc/40?u=${data.data.author}`} alt={data.data.author} />
          </div>
        </div>
        <span class="text-sm font-medium">{data.data.author}</span>
      </div>
      <a href={`/blog/${data.id}`} class="btn btn-primary btn-sm">Lire la suite</a>
    </div>
  </div>
</div>
