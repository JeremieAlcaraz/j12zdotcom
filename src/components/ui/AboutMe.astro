---
import ImageMod from '@components/common/ImageMod/ImageMod.astro';
import { markdownify } from '@/utils/textConverter';
import { getEntry } from 'astro:content';

interface Section {
  title: string;
  content: string;
  image?: string;
}

interface AboutData {
  presentation: Section;
  story: Section;
  differences: Section;
  credentials: Section;
}

const aboutEntry = await getEntry('about', 'index');
if (!aboutEntry) {
  throw new Error('About entry not found! Check src/content/about/index.mdx');
}

const { presentation, story, differences, credentials } = aboutEntry.data as AboutData;
---
<section class="space-y-24 py-16">
  <!-- Section 1: The Guy -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
    <div class="flex justify-center lg:justify-start">
      <div class="mask mask-squircle w-64 h-64 overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105">
        <ImageMod
          src={presentation.image}
          alt={presentation.title}
          width={512}
          height={512}
          class="object-cover w-full h-full"
        />
      </div>
    </div>
    <div>
      <h2 class="text-3xl font-bold mb-4">{presentation.title}</h2>
      <p class="leading-relaxed" set:html={markdownify(presentation.content)} />
    </div>
  </div>

  <!-- Section 2: Story -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
    <div class="order-2 lg:order-1">
      <h2 class="text-3xl font-bold mb-4">{story.title}</h2>
      <p class="leading-relaxed" set:html={markdownify(story.content)} />
    </div>
    <div class="order-1 lg:order-2 flex justify-center lg:justify-end">
      <div class="mask mask-hexagon w-64 h-64 overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105">
        <ImageMod
          src={story.image}
          alt={story.title}
          width={512}
          height={512}
          class="object-cover w-full h-full"
        />
      </div>
    </div>
  </div>

  <!-- Section 3: Differences -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
    <div class="flex justify-center lg:justify-start">
      <div class="mask mask-diamond w-64 h-64 overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105">
        <ImageMod
          src={differences.image}
          alt={differences.title}
          width={512}
          height={512}
          class="object-cover w-full h-full"
        />
      </div>
    </div>
    <div>
      <h2 class="text-3xl font-bold mb-4">{differences.title}</h2>
      <p class="leading-relaxed" set:html={markdownify(differences.content)} />
    </div>
  </div>

  <!-- Section 4: Credentials -->
  <div class="max-w-2xl mx-auto text-center">
    <h2 class="text-3xl font-bold mb-4">{credentials.title}</h2>
    <div class="prose mx-auto" set:html={markdownify(credentials.content, true)} />
  </div>
</section>
