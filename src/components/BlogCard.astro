---
import type { CollectionEntry } from 'astro:content';

interface Props {
  data: CollectionEntry<'blog'>;
  index?: number;
}

const { data, index = 0 } = Astro.props;
const isEven = index % 2 === 0;
---

<style>
  [data-theme="dark"] .blog-card {
    border-color: transparent !important;
    box-shadow: 0 0 15px rgba(255,255,255,0.2);
  }
  
  [data-theme="dark"] .blog-card.primary-hover:hover {
    border-color: oklch(67.76% 0.12 355.76) !important;
    box-shadow: 0 0 25px rgba(229,82,133,0.7);
  }
  
  [data-theme="dark"] .blog-card.secondary-hover:hover {
    border-color: oklch(75.46% 0.08 221.25) !important;
    box-shadow: 0 0 25px rgba(129,140,248,0.7);
  }
</style>

<div class={`blog-card card card-compact w-full bg-base-100 shadow-xl transition-all duration-300 hover:shadow-2xl border-2 border-gray-200 ${isEven ? 'primary-hover hover:border-primary' : 'secondary-hover hover:border-secondary'}`}>
  <a href={`/blog/${data.slug}`}>
    <figure class="relative">
      {data.data.image && <img src={data.data.image} alt={data.data.title} class="w-full object-cover h-24" />}
    </figure>
  </a>
  <div class="card-body p-4">
    <div class="flex flex-wrap items-center gap-1 mb-3">
      {data.data.categories.map(category => (
        <a href={`/categories/${category}`} class="badge badge-secondary badge-sm capitalize">{category}</a>
      ))}
    </div>
    <h2 class="card-title text-base">
      <a href={`/blog/${data.slug}`}>{data.data.title}</a>
    </h2>
    {data.data.description && <p class="text-base-content/80">{data.data.description}</p>}
    <div class="card-actions mt-4 items-center justify-between">
       <div class="flex items-center gap-2">
        <div class="avatar">
            <div class="w-8 rounded-full">
                <img src={`https://i.pravatar.cc/40?u=${data.data.author}`} alt={data.data.author} />
            </div>
        </div>
        <span class="text-sm font-medium">{data.data.author}</span>
       </div>
      <a href={`/blog/${data.slug}`} class="btn btn-primary btn-sm">Lire la suite</a>
    </div>
  </div>
</div>
