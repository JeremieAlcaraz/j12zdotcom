---
import BaseCard from '@/ui/atoms/BaseCard.astro'

const VARIANTS = ['default', 'bordered', 'compact', 'side', 'glass', 'image-full'] as const
export type Variant = (typeof VARIANTS)[number]

interface Props {
  variant?: Variant
  base?: 100 | 200 | 300
  shadow?: 'none' | 'sm' | 'md' | 'lg' | 'xl' | '2xl'
  hover?: boolean
  class?: string
}

const {
  variant = 'default',
  base = 100,
  shadow = 'md',
  hover = false,
  class: className,
} = Astro.props as Props

// Map base to BaseCard background
const backgroundMap = {
  100: 'base-100' as const,
  200: 'base-200' as const,
  300: 'base-300' as const,
}

// Map variant to specific styling
const variantClasses: Record<Variant, string> = {
  default: '',
  bordered: '', // handled by BaseCard border prop
  compact: 'card-compact',
  side: 'card-side',
  glass: '', // handled by BaseCard glass prop
  'image-full': 'image-full',
}

// Determine BaseCard props based on variant
const baseCardProps = {
  background: backgroundMap[base],
  shadow: variant === 'glass' ? 'lg' : shadow,
  border: variant === 'bordered' ? 'default' : 'none',
  glass: variant === 'glass',
  hover,
  padding: 'none', // We'll handle padding with card-body
}

const cardSpecificClasses = ['card', variantClasses[variant], className].filter(Boolean).join(' ')
---

<BaseCard {...(baseCardProps as any)} class={cardSpecificClasses}>
  {
    Astro.slots.has('image') && (
      <figure>
        <slot name="image" />
      </figure>
    )
  }
  <div class="card-body">
    {
      Astro.slots.has('title') && (
        <h2 class="card-title">
          <slot name="title" />
        </h2>
      )
    }
    <slot />
    {
      Astro.slots.has('actions') && (
        <div class="card-actions justify-end">
          <slot name="actions" />
        </div>
      )
    }
  </div>
</BaseCard>
