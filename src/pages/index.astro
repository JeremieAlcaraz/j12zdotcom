---
// src/pages/index.astro
import ImageMod from '@layouts/components/ImageMod.astro';
import { markdownify } from '@/utils/textConverter';
import BaseLayout from '@layouts/BaseLayout.astro';
import Hero from '@layouts/partials/hero/Hero.astro';
import type { Button, Feature } from '@/types';
import type { CollectionEntry } from 'astro:content';
import { getEntry } from 'astro:content';

interface Homepage {
  banner: {
    title: string;
    content: string;
    image: string;
    button: Button;
  };
  features: Feature[];
}

const homepage = (await getEntry('homepage', '-index')) as CollectionEntry<'homepage'>;
const { banner } = homepage.data as Homepage;
---

<BaseLayout title="Accueil - Mon Site">
  <!-- Banner -->
  <section class="section pt-14">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-7 md:col-9 mb-8 text-center">
          <h1 set:html={markdownify(banner.title)} class="mb-4 text-h3 lg:text-h1" />
          <p set:html={markdownify(banner.content)} class="mb-8" />
          {
            banner.button.enable && (
              <a
                class="btn btn-primary"
                href={banner.button.link}
                target={banner.button.link.startsWith('http') ? '_blank' : '_self'}
                rel="noopener"
              >
                {banner.button.label}
              </a>
            )
          }
        </div>
        {
          banner.image && (
            <div class="col-12">
              <ImageMod src={banner.image} height={380} width={1200} alt="banner" format="webp" />
            </div>
          )
        }
      </div>
    </div>
  </section>
  <!-- /Banner -->

  <!-- ====================================== -->
  <!-- 1) HERO : full-width via slot="hero" -->
  <!-- ====================================== -->
  <!-- on passe le nav via slot nommÃ© -->
  <!-- <Hero slot="hero" />-->
</BaseLayout>
