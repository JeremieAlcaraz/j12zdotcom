---
import BaseLayout from "@/layouts/BaseLayout.astro";
import PostSingle from "@/layouts/PostSingle.astro";
import { getCollection } from 'astro:content';
import { getSinglePage } from "@/utils/contentParser.astro";


export async function getStaticPaths() {
  const BLOG_FOLDER = "blog";
  const posts = await getSinglePage(BLOG_FOLDER);
  
  // console.log('Posts found:', posts.length);
  // console.log('Sample post:', posts[0]);
  
  const paths = posts.map((post) => ({
    params: {
      slug: post.id,
    },
    props: { post },
  }));
  
  return paths;
}


const { post } = Astro.props;
console.log('=== DEBUG [slug].astro ===');
console.log('Post exists:', !!post);
console.log('Post data:', post?.data);
console.log('Post id:', post?.id);
// console.log('Post slug:', post?.slug);
const { title, meta_title, description, image } = post.data;
---

<BaseLayout
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <PostSingle post={post} />
</BaseLayout>
