---
import StyleGuideLayout from '@/layouts/StyleGuideLayout.astro'
import ComponentGallery from '@/components/playground/ComponentGallery.astro'
import CardBlogGallery from '@/components/playground/CardBlogGallery.astro'
import CardPricingGallery from '@/components/playground/CardPricingGallery.astro'
import CardVariantsGallery from '@/components/playground/CardVariantsGallery.astro'
import { getSinglePage } from '@/utils/contentParser'
import { sortByDate } from '@/utils/sortFunctions'

const modules = import.meta.glob('@ui/organisms/**/*.astro', { eager: true })

const BLOG_FOLDER = 'blog'
const posts = await getSinglePage(BLOG_FOLDER)
const sortedPosts = sortByDate(posts)
const currentPosts = sortedPosts.slice(0, 3)

const extra = [
  {
    name: 'Card',
    Component: CardVariantsGallery,
  },
  {
    name: 'BlogCard',
    Component: CardBlogGallery,
    props: { posts: currentPosts },
  },
  {
    name: 'PricingCard',
    Component: CardPricingGallery,
  },
]
---

<StyleGuideLayout title="Style Guide | Organisms">
  <ComponentGallery modules={modules} exclude={['Card']} extra={extra} />
</StyleGuideLayout>
