---
import StyleGuideLayout from '@/layouts/StyleGuideLayout.astro'
import ComponentGallery from '@/components/dev/ComponentGallery.astro'
import { getSinglePage } from '@/utils/contentParser.astro'
import { sortByDate } from '@/utils/sortFunctions'

const modules = import.meta.glob('@/components/organisms/**/*.astro', { eager: true })

const BLOG_FOLDER = 'blog'
const posts = await getSinglePage(BLOG_FOLDER)
const sortedPosts = sortByDate(posts)
const currentPosts = sortedPosts.slice(0, 1)

const demoProps = {
  BlogCard: { data: currentPosts[0] },
  PostSidebar: { categories: ['astro', 'dev'], allCategories: ['astro', 'dev', 'astro'] },
}
---

<StyleGuideLayout title="Style Guide | Organisms">
  <ComponentGallery modules={modules} demoProps={demoProps} exclude={['TestimonialCard']} />
</StyleGuideLayout>
