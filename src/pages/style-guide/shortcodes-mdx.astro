---
import StyleGuideLayout from '@/domain/style-guide/layouts/StyleGuideLayout.astro'
import ComponentGallery from '@/domain/dev/ComponentGallery.astro'
import Icon from '@/ui/atoms/Icon.astro'
import LottiePlayer from '@/ui/atoms/LottiePlayer.astro'
import DotLottiePlayer from '@/ui/atoms/DotLottiePlayer.astro'

const modules = import.meta.glob('@/shortcodes/generic/*.shortcode.astro', { eager: true })

const demoProps = {
  Accordion: { title: 'Titre', children: "Contenu de l'accord√©on." },
  Button: { label: 'Visiter Astro', link: 'https://astro.build' },
  DotLottiePlayer: {
    src: '/animations/watermelon-loader.lottie',
    width: 150,
    height: 150,
    loop: true,
    autoplay: true,
    controls: true,
    class: 'bg-base-200 rounded-lg'
  },
  Icon: { name: 'cat', size: 24, class: 'text-primary', title: 'Chat mignon' },
  LottiePlayer: {
    src: '/animations/watermelon-simple.json',
    width: 150,
    height: 150,
    loop: true,
    autoplay: true,
    controls: true,
    class: 'bg-base-200 rounded-lg'
  },
  Notice: { type: 'tip', children: 'Une petite astuce.' },
  Video: {
    title: 'Sample',
    src: 'https://www.w3schools.com/html/mov_bbb.mp4',
    width: 320,
    height: 240,
  },
  Youtube: { id: 'C0DPdy98e4c', title: 'YouTube' },
}
---

<StyleGuideLayout title="Style Guide | Shortcodes MDX">
  <ComponentGallery modules={modules} demoProps={demoProps} />

  <div class="mt-12 p-6 bg-base-100 rounded-lg">
    <h2 class="text-2xl font-bold mb-6">Test des ic√¥nes dans diff√©rents contextes</h2>

    <div class="space-y-4">
      <p>Ic√¥nes avec diff√©rentes tailles :
        <Icon name="cat" size="16" class="text-primary" title="Petit chat" />
        <Icon name="music" size="24" class="text-secondary ml-2" title="Musique" />
        <Icon name="sun" size="32" class="text-warning ml-2" title="Soleil" />
      </p>

      <p>Ic√¥nes de navigation :
        <Icon name="chevron-left" class="text-info mr-2" title="Pr√©c√©dent" />
        Navigation
        <Icon name="chevron-right" class="text-info ml-2" title="Suivant" />
      </p>

      <p>Mode sombre/clair :
        <Icon name="moon" class="text-base-content mr-2" title="Mode sombre" />
        <Icon name="sun" class="text-base-content" title="Mode clair" />
      </p>

      <div class="bg-primary text-primary-content p-4 rounded">
        <p>Ic√¥nes h√©ritent de la couleur du conteneur :
          <Icon name="cat" class="mr-2" title="Chat" />
          <Icon name="music" title="Musique" />
        </p>
      </div>
    </div>
  </div>

  <div class="mt-12 p-6 bg-base-100 rounded-lg">
    <h2 class="text-2xl font-bold mb-6">Test des animations Lottie dans diff√©rents formats</h2>

    <div class="space-y-6">
      <div>
        <h3 class="text-lg font-bold mb-3">Animation JSON classique</h3>
        <p class="mb-3">Format standard support√© par lottie-web :</p>
        <LottiePlayer
          src="/animations/watermelon-simple.json"
          width={120}
          height={120}
          loop={true}
          autoplay={true}
          class="bg-base-200 rounded-lg mx-auto"
        />
      </div>

      <div>
        <h3 class="text-lg font-bold mb-3">Animation .lottie (dotLottie)</h3>
        <p class="mb-3">Format compress√© support√© par @lottiefiles/dotlottie-web :</p>
        <DotLottiePlayer
          src="/animations/watermelon-loader.lottie"
          width={120}
          height={120}
          loop={true}
          autoplay={true}
          controls={true}
          class="bg-base-200 rounded-lg mx-auto"
        />
      </div>

      <div class="bg-info/10 p-4 rounded-lg">
        <h4 class="font-semibold mb-2">üìù Diff√©rences entre les formats :</h4>
        <ul class="text-sm space-y-1">
          <li><strong>.json</strong> : Format texte standard, plus lourd mais universel</li>
          <li><strong>.lottie</strong> : Format binaire compress√©, plus l√©ger, peut contenir plusieurs animations</li>
        </ul>
      </div>
    </div>
  </div>
</StyleGuideLayout>
