# Dockerfile.dev - Image pour le développement Astro
FROM node:20-alpine

# Installer pnpm
RUN corepack enable && corepack prepare pnpm@10.16.1 --activate

# Définir le répertoire de travail
WORKDIR /app

# Copier les fichiers de dépendances
COPY package.json pnpm-lock.yaml ./

# Installer les dépendances
RUN pnpm install --frozen-lockfile

# Copier le reste du code
COPY . .

# Exposer le port Astro
EXPOSE 4321

# Commande par défaut (peut être surchargée dans docker-compose)
CMD ["pnpm", "dev", "--host", "0.0.0.0"]
